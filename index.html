function formatDate(date) {
  if (!date) return "Invalid Date"; // catches undefined, null, false, ""

  // If Firestore Timestamp object with toDate() method
  if (typeof date.toDate === 'function') {
    date = date.toDate();
  } else if (typeof date === 'string' || typeof date === 'number') {
    // Convert ISO string or timestamp number to Date object
    date = new Date(date);
  } else if (!(date instanceof Date)) {
    // If date is still not a Date instance, return fallback text
    return "Invalid Date";
  }

  if (isNaN(date.getTime())) {
    // If the date is invalid (e.g., new Date("invalid") => NaN)
    return "Invalid Date";
  }

  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');
  return `${month}/${day}/${year.toString().slice(-2)}`;
}
